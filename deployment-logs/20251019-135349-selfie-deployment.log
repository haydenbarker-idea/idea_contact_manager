[2025-10-19 13:53:49] === STEP 1: Stopping service ===
[2025-10-19 13:53:49] ✓ Service stopped
[2025-10-19 13:53:49] === STEP 2: Pulling latest code ===
HEAD is now at 22d545d feat: auto-populate .env with placeholders for API credentials - Deployment script now creates .env with all known values - Pre-fills: user info, bio, phone, email, LinkedIn - Creates placeholder sections for Twilio and Resend - Clear PASTE_YOUR_ placeholders make it obvious what to fill in - Warns if placeholders are still present - Updates env.example.txt with same helpful placeholders - Now you just paste in 4 credentials and redeploy
[2025-10-19 13:53:50] ✓ Code updated to latest version
[2025-10-19 13:53:50] === STEP 3: Updating environment variables ===
[2025-10-19 13:53:50] ✓ Backed up existing .env
[2025-10-19 13:53:50] Bio already configured
[2025-10-19 13:53:50] Adding Twilio configuration template...
[2025-10-19 13:53:50] ⚠ Twilio credentials need to be added - edit .env file
[2025-10-19 13:53:50] Adding Resend configuration template...
[2025-10-19 13:53:50] ⚠ Resend API key needs to be added - edit .env file
[2025-10-19 13:53:50] ⚠⚠⚠ IMPORTANT ⚠⚠⚠
[2025-10-19 13:53:50] API credentials contain placeholders!
[2025-10-19 13:53:50] Edit /var/www/contact-exchange/.env and replace:
[2025-10-19 13:53:50]   - PASTE_YOUR_TWILIO_ACCOUNT_SID_HERE
[2025-10-19 13:53:50]   - PASTE_YOUR_TWILIO_AUTH_TOKEN_HERE
[2025-10-19 13:53:50]   - PASTE_YOUR_TWILIO_PHONE_NUMBER_HERE
[2025-10-19 13:53:50]   - PASTE_YOUR_RESEND_API_KEY_HERE
[2025-10-19 13:53:50] Then run: bash deploy-selfie-experience.sh
[2025-10-19 13:53:50] ✓ Environment configured
[2025-10-19 13:53:50] === STEP 4: Installing dependencies ===

> contact-exchange@0.1.0 postinstall
> prisma generate

Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma

✔ Generated Prisma Client (v5.22.0) to ./node_modules/@prisma/client in 110ms

Start by importing your Prisma Client (See: https://pris.ly/d/importing-client)

Help us improve the Prisma ORM for everyone. Share your feedback in a short 2-min survey: https://pris.ly/orm/survey/release-5-22


up to date, audited 515 packages in 6s

171 packages are looking for funding
  run `npm fund` for details

1 critical severity vulnerability

To address all issues, run:
  npm audit fix --force

Run `npm audit` for details.
[2025-10-19 13:53:56] ✓ Dependencies installed
[2025-10-19 13:53:56] === STEP 5: Creating missing UI components ===
[2025-10-19 13:53:56] Dialog component already exists
[2025-10-19 13:53:56] === STEP 6: Running database migration ===
Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma
Datasource "db": PostgreSQL database "contact_exchange", schema "public" at "localhost:5432"

The database is already in sync with the Prisma schema.

Environment variables loaded from .env
Prisma schema loaded from prisma/schema.prisma

✔ Generated Prisma Client (v5.22.0) to ./node_modules/@prisma/client in 201ms

Start by importing your Prisma Client (See: https://pris.ly/d/importing-client)

Help us improve the Prisma ORM for everyone. Share your feedback in a short 2-min survey: https://pris.ly/orm/survey/release-5-22

[2025-10-19 13:54:01] ✓ Database updated with photo and conference fields
[2025-10-19 13:54:01] === STEP 7: Creating uploads directory ===
[2025-10-19 13:54:01] ✓ Uploads directory ready
[2025-10-19 13:54:01] === STEP 8: Building application ===

> contact-exchange@0.1.0 build
> next build

 ⚠ Invalid next.config.js options detected: 
 ⚠     Unrecognized key(s) in object: 'isrMemoryCacheSize' at "experimental"
 ⚠ See more info here: https://nextjs.org/docs/messages/invalid-next-config
  ▲ Next.js 14.2.14
  - Environments: .env

   Creating an optimized production build ...
 ✓ Compiled successfully
   Linting and checking validity of types ...
   Collecting page data ...
Error: accountSid must start with AC
    at n.setAccountSid (/var/www/contact-exchange/.next/server/chunks/743.js:4:84605)
    at new t (/var/www/contact-exchange/.next/server/chunks/743.js:4:83508)
    at new n (/var/www/contact-exchange/.next/server/chunks/743.js:12:32949)
    at N (/var/www/contact-exchange/.next/server/chunks/743.js:6:2817)
    at 1508 (/var/www/contact-exchange/.next/server/app/api/communications/sms/route.js:42:971)
    at t (/var/www/contact-exchange/.next/server/webpack-runtime.js:1:128)
    at 27667 (/var/www/contact-exchange/.next/server/app/api/communications/sms/route.js:1:1157)
    at t (/var/www/contact-exchange/.next/server/webpack-runtime.js:1:128)
    at r (/var/www/contact-exchange/.next/server/app/api/communications/sms/route.js:42:1416)
    at /var/www/contact-exchange/.next/server/app/api/communications/sms/route.js:42:1451

> Build error occurred
Error: Failed to collect page data for /api/communications/sms
    at /var/www/contact-exchange/node_modules/next/dist/build/utils.js:1268:15
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  type: 'Error'
}
[2025-10-19 13:54:40] Creating missing prerender-manifest.json
[2025-10-19 13:54:40] ✗ Build failed - BUILD_ID not found
[2025-10-19 13:54:40] === Syncing logs to GitHub ===
